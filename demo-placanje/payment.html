<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plaćanje</title>
    <link rel="stylesheet" href="payment_style.css">
</head>
<body>
    <main class="container">
        <b style="font-size: 4.5rem;">Plaćanje</b>
        <img style="width: 80%;" src="ips_logo.png"/>
        <p class="description">Izvršite plaćanje u okruženju vaše banke tako što ćete izabrati banku čiju mbanking aplikaciju imate na svom uređaju i kliknuti na dugme PLATI.</p>
        <p class="description">Uplata na račun br: <br/> <b id="account-number"></b></p>
        <span>
            <p class="amount">Iznos:</p><br/>
            <b class="amount" id="amount"></b>
        </span>
        <p class="description" style="text-align: left;">Platite mbanking aplikacijom svoje banke:</p>
        <select id="bank-select" class="bank-select">
            <option selected disabled>Izaberite banku</option>
            <option value="intent://www.addiko.rs/ips/ek/fl/">ADDIKO BANK</option>
            <option value="intent://ebanking.aikbanka.rs/ips/ek/fl/">AIK BANKA</option>
            <option value="intent://altabanka.24x7.rs/ips/ek/fl/">ALTA BANKA</option>
            <option value="intent://ipspos.bancaintesa.rs/ips/ek/fl/">BANCA INTESA</option>
            <option value="intent://online.mtsbanka.rs/ips/ek/fl/">BANKA POŠTANSKA ŠTEDIONICA - NOVA APP</option>
            <option value="intent://erstebank.24x7.rs/ips/ek/fl/">ERSTE BANK</option>
            <option value="intent://www.eurobank-direktna.rs/ips/ek/fl/">EUROBANK-DIREKTNA BANKA</option>
            <option value="intent://expobank.24x7.rs/ips/ek/fl/">EXPOBANK</option>
            <option value="intent://halkbank.24x7.rs/ips/ek/fl/">HALKBANK</option>
            <option value="intent://online.mobibanka.rs/ips/ek/fl/">MOBI BANKA</option>
            <option value="intent://mbankkombank.24x7.rs/ips/ek/fl/">NLB KOMERCIJALNA BANKA</option>
            <option value="intent://ebank.otpbanka.rs/ips/ek/fl/">OTP BANKA SRBIJA</option>
            <option value="intent://rol.raiffeisenbank.rs/ips/ek/fl/">RAIFFEISEN BANKA</option>
            <option value="intent://srpskabanka.24x7.rs/ips/ek/fl/">SRPSKA BANKA</option>
            <option value="intent://www.unicreditbank.rs/ips/ek/fl/">UNICREDIT BANK SRBIJA</option>
        </select>
        <a id="payment-link" href="#" style="text-decoration: none; width: 100%; display: contents;">
            <button class="payment-button">Plati</button>
        </a>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                var accountNumber = getUrlParameter('racun');
                var amount = getUrlParameter('iznos');
                document.getElementById("account-number").textContent = accountNumber;
                document.getElementById("amount").textContent = amount + " RSD";
            });

            document.getElementById("bank-select").addEventListener("change", function() {
                var selectElement = document.getElementById("bank-select");
                var selectedBank = selectElement.options[selectElement.selectedIndex].value;
                var telefonValue = getUrlParameter('telefon');
                var redirectURL = selectedBank + "?data=SzpFS3xWOjAxfEM6MXxSOjE2MDAwMDAwMDAyMTUzNTMzN3xOOkpLUCBQYXJraW5nIHNlcnZpcyBOb3ZpIFNhZHxJOlJTRDIwMCwwMHxTRjoyMjF8TTo0OTAwfFJQOjEwMDAxNjkwMjQxMTUwMDAwMDE=&callback=https%3A%2F%2Fnikolablesic.github.io%2Fsuccessful.html%3Ftelefon%3D"  + encodeURIComponent(telefonValue) + "#Intent;scheme=https;end";
                document.getElementById("payment-link").href = redirectURL;
            });

            function getUrlParameter(name) {
                name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
                var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
                var results = regex.exec(location.search);
                return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
            }
        </script>
    </main>
</body>
</html>
